# Claude Instructions for Skills Factory

Official Anthropic skill creation process for this factory.

## When the User Requests a New Skill

Follow the official 6-step skill creation process:

### Step 1: Understand with Concrete Examples

Ask clarifying questions to understand how the skill will be used:

- What functionality should the skill support?
- Can you give examples of how this would be used?
- What would a user say that should trigger this skill?

Example queries to collect:
- "Create a skill for API documentation" → What types of APIs? OpenAPI/Swagger?
- "Skill for test coverage" → What test frameworks? What metrics?

### Step 2: Plan Reusable Resources

Analyze examples to determine what resources are needed:

**Ask yourself:**
- Is the same code being rewritten repeatedly? → `scripts/`
- Is there reference documentation Claude needs? → `references/`
- Are there templates or files for output? → `assets/`

**Examples:**
- PDF rotation → `scripts/rotate_pdf.py`
- Database queries → `references/schema.md`
- Project scaffolding → `assets/react-template/`

### Step 3: Initialize the Skill

Use the official init script:

```bash
python scripts/init_skill.py skill-name --path skills/category
```

**Category selection:**
- `development`: Code creation, refactoring, debugging, architecture
- `data-analysis`: Data processing, visualization, statistics
- `automation`: Scripts, CI/CD, workflows
- `documentation`: Docs, READMEs, API documentation
- `testing`: Tests, coverage, frameworks
- `utilities`: General tools, formatters, converters

### Step 4: Edit the Skill

#### A. Implement Resources First

Based on Step 2 planning:
- Add scripts to `scripts/`
- Add reference docs to `references/`
- Add templates/assets to `assets/`
- **Delete example files** that aren't needed

#### B. Update SKILL.md

**Writing style:** Use imperative/infinitive form (verb-first), NOT second person

**Good:**
```markdown
To generate API documentation, analyze the endpoints and create OpenAPI specs.
Use scripts/generator.py when processing multiple files.
```

**Bad:**
```markdown
You should generate API documentation by analyzing endpoints.
If you need to process multiple files, you can use scripts/generator.py.
```

**Answer these questions in SKILL.md:**
1. What is the purpose? (1-2 sentences in Overview)
2. When should it be used? (Specific scenarios)
3. How to use it in practice? (Step-by-step workflow)
4. What resources are available? (Reference scripts/, references/, assets/)

**Frontmatter requirements:**
```yaml
---
name: skill-name (hyphen-case, lowercase)
description: Complete explanation with trigger terms. Use third-person. Include WHEN to use. Max 1024 chars.
allowed-tools: Read, Grep, Glob, Bash  # Only for readonly skills
---
```

**Description must include:**
- WHAT the skill does
- WHEN to use it (specific scenarios)
- Trigger terms users would say
- Third-person voice ("This skill should be used when...")

**Trigger terms to include:**

Based on skill type:
- Code generation: create, generate, scaffold, boilerplate, setup, initialize
- Analysis: analyze, check, review, audit, inspect, examine
- Refactoring: refactor, restructure, clean up, organize
- Documentation: document, generate docs, README, API docs
- Testing: test, coverage, unit test, integration test
- Debugging: debug, troubleshoot, fix, error, issue

### Step 5: Update Catalog

After creating the skill, update `CATALOG.md`:

Add entry under appropriate category:

```markdown
### skill-name

**Location**: `skills/category/skill-name/`
**Type**: workflow-based | task-based | reference | capabilities
**Description**: (from SKILL.md)
**Created**: YYYY-MM-DD
**Trigger Terms**: (key terms from description)
**Resources**:
- scripts: (list if any)
- references: (list if any)
- assets: (list if any)
```

### Step 6: Offer Deployment

Ask user where to deploy:

**Personal:**
```bash
cp -r skills/category/skill-name ~/.claude/skills/
```

**Project:**
```bash
cp -r skills/category/skill-name .claude/skills/
```

**Package for distribution:**
```bash
python scripts/package_skill.py skills/category/skill-name ./dist
```

## Template Selection

Choose template approach based on skill structure:

- **Workflow-Based**: Sequential processes (Overview → Workflow Decision Tree → Steps)
- **Task-Based**: Different operations (Overview → Quick Start → Task Categories)
- **Reference/Guidelines**: Standards/specs (Overview → Guidelines → Specifications)
- **Capabilities-Based**: Interrelated features (Overview → Core Capabilities → numbered list)

Most skills combine patterns as needed.

## Resource Guidelines

### scripts/

**When to include:**
- Same code repeatedly rewritten
- Deterministic reliability needed
- Complex operations

**Examples:**
- `rotate_pdf.py` - PDF rotation
- `document.py` - Document processing module
- `transform_csv.py` - Data transformation

### references/

**When to include:**
- Documentation too long for SKILL.md (>5k words)
- API references
- Database schemas
- Comprehensive guides

**Examples:**
- `api_docs.md` - API reference
- `schema.md` - Database schema
- `communication.md` - Workflow guide

**Best practice:** For large files, include grep patterns in SKILL.md so Claude can search without loading full file.

### assets/

**When to include:**
- Templates for output
- Images, logos, fonts
- Boilerplate code directories
- Files meant to be copied/modified

**Examples:**
- `logo.png` - Brand asset
- `hello-world/` - React boilerplate directory
- `template.pptx` - PowerPoint template
- `font.ttf` - Typography asset

## Quality Checklist

Before finishing, verify:

- [ ] Name is hyphen-case (lowercase with hyphens only)
- [ ] No consecutive hyphens or leading/trailing hyphens
- [ ] Description uses third-person
- [ ] Description includes specific trigger terms
- [ ] Description explains WHAT and WHEN
- [ ] Description max 1024 characters
- [ ] Instructions use imperative form (verb-first)
- [ ] Resources (scripts/, references/, assets/) are referenced in SKILL.md
- [ ] Example files deleted if not needed
- [ ] `allowed-tools` set if readonly skill
- [ ] CATALOG.md updated with new entry
- [ ] Validated with `python scripts/quick_validate.py`

## Progressive Disclosure

Skills use three-level loading:

1. **Metadata** (name + description): Always in context (~100 words)
2. **SKILL.md body**: When skill triggers (<5k words recommended)
3. **Bundled resources**: As needed (unlimited)

Keep SKILL.md lean. Use references/ for detailed docs. Use assets/ for output files.

## Tool Restrictions

For readonly/analysis skills, use allowed-tools to avoid permission prompts:

```yaml
allowed-tools: Read, Grep, Glob, Bash
```

**Common combinations:**
- Analysis only: Read, Grep, Glob, Bash
- File operations: Read, Edit, Write, Bash
- Full access: Omit allowed-tools

## Validation

Always validate before deploying:

```bash
python scripts/quick_validate.py skills/category/skill-name
```

Checks:
- SKILL.md exists
- Valid YAML frontmatter
- Required fields (name, description)
- Hyphen-case naming
- No invalid characters

## Example Workflow

```
User: "Create a skill for generating REST API documentation"

Claude:
1. [Ask questions] What API format? OpenAPI/Swagger? Any specific frameworks?
2. [Plan resources] Needs: scripts/generate_openapi.py, references/api_spec.md
3. [Initialize] python scripts/init_skill.py api-doc-generator --path skills/documentation
4. [Edit] Update SKILL.md, add scripts and references, delete unused examples
5. [Update catalog] Add entry to CATALOG.md
6. [Offer deployment] Ask where to deploy or package
```

## Remember

- Start with concrete examples (Step 1)
- Plan resources before coding (Step 2)
- Use official init script (Step 3)
- Write imperatively, not second-person (Step 4)
- Include specific trigger terms (Step 4)
- Update catalog (Step 5)
- Validate before deploying (Step 6)
- Iterate based on real usage

This process ensures skills follow official Anthropic best practices and work reliably.
